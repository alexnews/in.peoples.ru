<?php
/**
 * Country list from worldsru.basis table: cc2 → countrus.
 * Sorted alphabetically by Russian name (same as basis ORDER BY countrus).
 */

function getCountries(): array
{
    return [
        'AU' => 'Австралия',
        'AT' => 'Австрия',
        'AZ' => 'Азербайджан',
        'AL' => 'Албания',
        'DZ' => 'Алжир',
        'VI' => 'Американские Вергинские острова',
        'AS' => 'Американское Самоа',
        'AI' => 'Ангилья',
        'VG' => 'Английский Вергинские острова',
        'AO' => 'Ангола',
        'AD' => 'Андорра',
        'AG' => 'Антигуа',
        'AN' => 'Антильские о.',
        'AR' => 'Аргентина',
        'AM' => 'Армения',
        'AW' => 'Аруба',
        'AF' => 'Афганистан',
        'BS' => 'Багамские о.',
        'BD' => 'Бангладеш',
        'BB' => 'Барбадос',
        'BH' => 'Бахрейн',
        'BY' => 'Беларусь',
        'BZ' => 'Белиз',
        'BE' => 'Бельгия',
        'BJ' => 'Бенин',
        'BM' => 'Бермудские о.',
        'BG' => 'Болгария',
        'BO' => 'Боливия',
        'BA' => 'Босния и Герцоговина',
        'BW' => 'Ботсвана',
        'BR' => 'Бразилия',
        'BN' => 'Бруней',
        'BF' => 'Буркина-Фасо',
        'BI' => 'Бурунди',
        'BT' => 'Бутан',
        'VU' => 'Вануату',
        'VA' => 'Ватикан',
        'GB' => 'Великобритания',
        'HU' => 'Венгрия',
        'VE' => 'Венесуэла',
        'TL' => 'Восточный Тимор',
        'VN' => 'Вьетнам',
        'GA' => 'Габон',
        'HT' => 'Гаити',
        'GY' => 'Гайана',
        'GM' => 'Гамбия',
        'GH' => 'Гана',
        'GT' => 'Гватемала',
        'GN' => 'Гвинея',
        'GW' => 'Гвинея Бисау',
        'DE' => 'Германия',
        'GI' => 'Гибралтар',
        'HN' => 'Гондурас',
        'HK' => 'Гонконг',
        'GD' => 'Гренада',
        'GL' => 'Гренландия',
        'GR' => 'Греция',
        'GE' => 'Грузия',
        'GU' => 'Гуам',
        'DK' => 'Дания',
        'CD' => 'Демократическая республика Конго',
        'DJ' => 'Джибути',
        'DM' => 'Доминика',
        'DO' => 'Доминиканская р.',
        'EG' => 'Египет',
        'ZM' => 'Замбия',
        'WS' => 'Западная Самоа',
        'ZW' => 'Зимбабве',
        'IL' => 'Израиль',
        'IN' => 'Индия',
        'ID' => 'Индонезия',
        'JO' => 'Иордания',
        'IQ' => 'Ирак',
        'IR' => 'Иран',
        'IE' => 'Ирландия',
        'IS' => 'Исландия',
        'ES' => 'Испания',
        'IT' => 'Италия',
        'YE' => 'Йемен',
        'CV' => 'Кабо-Верде',
        'KZ' => 'Казахстан',
        'KY' => 'Каимановы о.',
        'KH' => 'Камбоджа',
        'CM' => 'Камерун',
        'CA' => 'Канада',
        'QA' => 'Катар',
        'KE' => 'Кения',
        'CY' => 'Кипр',
        'KI' => 'Кирибати',
        'CN' => 'Китай',
        'CO' => 'Колумбия',
        'KM' => 'Коморы',
        'CG' => 'Конго',
        'CR' => 'Коста Рика',
        'CI' => 'Кот-Д`ивуар',
        'CU' => 'Куба',
        'KW' => 'Кувейт',
        'KG' => 'Кыргызстан',
        'LA' => 'Лаос',
        'LV' => 'Латвия',
        'LS' => 'Лесото',
        'LR' => 'Либерия',
        'LB' => 'Ливан',
        'LY' => 'Ливия',
        'LT' => 'Литва',
        'LI' => 'Лихтенштейн',
        'LU' => 'Люксембург',
        'MU' => 'Маврикий',
        'MR' => 'Мавритания',
        'MG' => 'Мадагаскар',
        'MK' => 'Македония',
        'MW' => 'Малави',
        'MY' => 'Малайзия',
        'ML' => 'Мали',
        'MV' => 'Мальдивы',
        'MT' => 'Мальта',
        'MP' => 'Марианские о.',
        'MA' => 'Марокко',
        'MH' => 'Маршалловы о.',
        'MX' => 'Мексика',
        'FM' => 'Микронезия',
        'MZ' => 'Мозамбик',
        'MD' => 'Молдовия',
        'MC' => 'Монако',
        'MN' => 'Монголия',
        'MS' => 'Монтсеррат',
        'MM' => 'Мьянма',
        'NA' => 'Намибия',
        'NR' => 'Науру',
        'NP' => 'Непал',
        'NE' => 'Нигер',
        'NG' => 'Нигерия',
        'NL' => 'Нидерланды',
        'NI' => 'Никарагуа',
        'NZ' => 'Новая Зеландия',
        'PG' => 'Новая Гвинея',
        'NO' => 'Норвегия',
        'CK' => 'о.Кука',
        'WF' => 'о.Уоллис',
        'AE' => 'ОАЭ',
        'OM' => 'Оман',
        'PK' => 'Пакистан',
        'PW' => 'Палау',
        'PS' => 'Палестина',
        'PA' => 'Панама',
        'PY' => 'Парагвай',
        'PE' => 'Перу',
        'PF' => 'Полинезия',
        'PL' => 'Польша',
        'PT' => 'Португалия',
        'RE' => 'Российская Империя',
        'RU' => 'Россия',
        'RW' => 'Руанда',
        'RO' => 'Румыния',
        'SV' => 'Сальвадор',
        'SM' => 'Сан-Марино',
        'ST' => 'Сан-Томе',
        'SA' => 'Сауд.Аравия',
        'SZ' => 'Свазиленд',
        'KP' => 'Северная Корея',
        'SC' => 'Сейшельские о.',
        'PM' => 'Сен-Пьер',
        'SN' => 'Сенегал',
        'VC' => 'Сент-Винсент и Гренадины',
        'KN' => 'Сент-Китс',
        'LC' => 'Сент-Люсия',
        'RS' => 'Сербия',
        'SG' => 'Сингапур',
        'SY' => 'Сирия',
        'SK' => 'Словакия',
        'SI' => 'Словения',
        'SB' => 'Соломоновы о.',
        'SO' => 'Сомали',
        'SU' => 'СССР',
        'SD' => 'Судан',
        'SR' => 'Суринам',
        'US' => 'США',
        'SL' => 'Сьерра-Леоне',
        'TJ' => 'Таджикистан',
        'TH' => 'Таиланд',
        'TW' => 'Тайвань',
        'TZ' => 'Танзания',
        'TT' => 'Тобаго',
        'TG' => 'Того',
        'TO' => 'Тонга',
        'TV' => 'Тувалу',
        'TN' => 'Тунис',
        'TM' => 'Туркменистан',
        'TR' => 'Турция',
        'UG' => 'Уганда',
        'UZ' => 'Узбекистан',
        'UA' => 'Украина',
        'UY' => 'Уругвай',
        'FO' => 'Фарерские о.',
        'FJ' => 'Фиджи',
        'PH' => 'Филиппины',
        'FI' => 'Финляндия',
        'FR' => 'Франция',
        'HR' => 'Хорватия',
        'CF' => 'ЦАР',
        'TD' => 'Чад',
        'ME' => 'Черногория',
        'CZ' => 'Чехия',
        'CL' => 'Чили',
        'CH' => 'Швейцария',
        'SE' => 'Швеция',
        'LK' => 'Шри-Ланка',
        'GQ' => 'Экв.Гвинея',
        'EC' => 'Эквадор',
        'ER' => 'Эритрея',
        'EE' => 'Эстония',
        'ET' => 'Эфиопия',
        'YU' => 'Югославия',
        'ZA' => 'Южная Африка',
        'KR' => 'Южная Корея',
        'JM' => 'Ямайка',
        'JP' => 'Япония',
    ];
}

/**
 * Render a <select> element for country selection.
 */
function countrySelect(string $name, string $id, string $selected = '', string $class = '', bool $hasError = false): string
{
    $countries = getCountries();
    $cssClass = 'form-select' . ($class !== '' ? ' ' . $class : '') . ($hasError ? ' is-invalid' : '');
    $selectedUpper = strtoupper($selected);

    $html = '<select class="' . $cssClass . '" id="' . htmlspecialchars($id, ENT_QUOTES, 'UTF-8')
          . '" name="' . htmlspecialchars($name, ENT_QUOTES, 'UTF-8') . '">';
    $html .= '<option value="">-- Выберите --</option>';

    foreach ($countries as $code => $label) {
        $sel = ($selectedUpper === $code) ? ' selected' : '';
        $html .= '<option value="' . $code . '"' . $sel . '>'
                . htmlspecialchars($label, ENT_QUOTES, 'UTF-8')
                . '</option>';
    }

    $html .= '</select>';
    return $html;
}
